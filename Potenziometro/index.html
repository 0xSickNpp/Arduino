<!DOCTYPE html>
<html>
<head>
	<title>Arduino - Potenziometro</title>
	<link rel="stylesheet" type="text/css" href="style.css">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
	<meta charset="utf-8">
</head>
<body id="body">
	<style media="screen">
		#nulla{
			text-align: justify;
			color: #black;
			font-size: 17px;
		}
		#nulla1{
			text-align: justify;
			color: #black;

		}
		#nulla2{
			text-align: center;
		}
		a[href="tempo_reale.php"]{
			color: darkblue;
		}
	</style>
	<div id="nav">
		<nav>
			<img src="logo.png" id="logo">
			<div class="navbar_item" id="nv1"><a href="#introduzione">Hardware</a></div>
			<div class="navbar_item" id="nv2"><a href="#h2">Schema elettrico</a></div>
			<div class="navbar_item" id="nv3"><a href="#sw">Software</a></div>
			<div class="navbar_item" id="nv4"><a href="#divprocedimento">Procedimento</a></div>
		</nav>
	</div>
		<header><p class="text">Progetto di Telecomunicazioni <i class="fas fa-satellite-dish"></i></p></header>
			<h2 id="sottotitolo_uno">Accensione di un led in base al valore letto tramite un accellerometro</h2><hr>
			<p id="introduzione">Introduzione</p><br>
	<div id="intro">Il progetto scelto, come da titolo, sarà un circuito che accenderà un determinato led in base al valore letto tramite un accelerometro. Elenchiamo di seguito i componenti: <br></div>
	<table width="600" id="Hardware">
		<tr>
			<td>
				<h2 id="elementi">OGGETTO</h2>
			</td>
			<td>
				<h2 id="elementi">UTILITÀ</h2>
			</td>
			<td>
				<h2 id="elementi">QUANTITÀ</h2>
			</td>
		</tr>
		<tr>
			<td>
				<p id="elementi">ARDUINO UNO</p>
			</td>
			<td>
				<p id="elementi">Alimentazione, algoritmo</p>
			</td>
			<td>
				<p id="elementi">1</p>
			</td>
		</tr>
		<tr>
			<td>
				<p id="elementi">BREADBOARD</p>
			</td>
			<td>
				<p id="elementi">Posizionamento dei componenti elettronici (led, switch, piezo)</p>
			</td>
			<td>
				<p id="elementi">1</p>
			</td>
		</tr>
		<tr>
			<td>
				<p id="elementi">POTENZIOMETRO</p>
			</td>
			<td>
				<p id="elementi">Calcolo del valore rilevato</p>
			</td>
			<td>
				<p id="elementi">1</p>
			</td>
		</tr>
		<tr>
			<td>
				<p id="elementi">LED</p>
			</td>
			<td>
				<p id="elementi">Accensione in base al valore rilevato</p>
			</td>
			<td>
				<p id="elementi">5</p>
			</td>
		</tr>
	</table>
<img id="imm1" src="http://thechallengercenter.net/wp-content/uploads/2016/06/Arduino-HD.jpg" alt="" width="17%" height="17%">
<img id="imm1"src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/5a/Final_render_pic_on_breadboard.png/800px-Final_render_pic_on_breadboard.png" alt="" width="21%" height="21%">
<img id="imm1"src="https://cdn.littlebird.com.au/images/files/000/063/504/large_webp/SF-COM-13939.webp?1535764303" alt="" width="11.9%" height="11.5%">
<img id="imm1"src="https://www.robotstore.it/open2b/var/products/11/70/0-cede72a5-300-Potenziometro-10Kohm-Lineare.jpg" alt=""width="12%" height="12%">
<img id="imm1"src="http://www.e-novagroup.it/wp-content/uploads/2016/11/illuminazione-led.png" alt="" width="18%" height="18%">
<hr>
<div id="divprocedimento">
<h1 id="h1">Procedimento</h1>
<p id="Procedimento">Per prima cosa abbiamo assemblato il circuito sull' Arduino UNO.<br>
Per fare ciò abbiamo scritto un codice in C dove in base al valore del potenziometro, l' Arduino UNO invia al dispositivo seriale.<br>
 Il codice python, che si interfaccia all'Arduino UNO come seriale, registra in una variabile il valore ricevuto e invia una richiesta web tramite metodo post ad una pagina web scritta in PHP che successivamente registrerà il valore insieme all'orario dell'arrivo della richiesta in un database. <br>
 I risultati vengono mostrati in <a href="tempo_reale.php">tempo reale in un'altra pagina PHP.</a>
</p>
</div>
<hr>
<h2 id="h2">Schema elettrico</h2>
<img id="immCircu"src="circuito.jpg" alt="">
<hr>
<h2 id="h2" class=""><p id="sw">Software</p></h2>
<table id="tabella2">
	<tr id="nulla">
	<td id="nulla2"><span style="color: #500000">C/ARDUINO</span></td>
	</tr>
	<tr>
		<td id="nulla">int Potenziometro = 0;
<br>
<span style="color: purple">void</span> setup()<br>
&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  pinMode(<span style="color: green">13</span>, OUTPUT);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  pinMode(<span style="color: green">12</span>, OUTPUT);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  pinMode(<span style="color: green">11</span>, OUTPUT);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  pinMode(<span style="color: green">10</span>, OUTPUT);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  pinMode(<span style="color: green">9</span>, OUTPUT);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  pinMode(<span style="color: green">3</span>, OUTPUT);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  pinMode(<span style="color: green">0</span>, INPUT);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  Serial.begin(<span style="color: green">9600</span>);<br>
&nbsp;}<br>
<span style="color: purple">void</span> loop()<br>
&nbsp;{	<br>
  &nbsp;&nbsp;&nbsp;Potenziometro = analogRead(<span style="color: green">0</span>);<br>
  &nbsp;&nbsp;&nbsp;<span style="color: purple">if</span>(Potenziometro > <span style="color: green">0</span> && Potenziometro < <span style="color: green">280</span>){<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	digitalWrite(<span style="color: green">13</span>, HIGH);<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  digitalWrite(<span style="color: green">12</span>, LOW);<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  digitalWrite(<span style="color: green">11</span>, LOW);<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  digitalWrite(<span style="color: green">10</span>, LOW);<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  digitalWrite(<span style="color: green">9</span>, LOW);<br>
  &nbsp;&nbsp;&nbsp;}<br>
	&nbsp;&nbsp;&nbsp;<span style="color: purple">else if</span>(Potenziometro < <span style="color: green">450</span>){<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	digitalWrite(<span style="color: green">13</span>, HIGH);<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  digitalWrite(<span style="color: green">12</span>, HIGH);<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  digitalWrite(<span style="color: green">11</span>, LOW);<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  digitalWrite(<span style="color: green">10</span>, LOW);<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  digitalWrite(<span style="color: green">9</span>, LOW);<br>
  &nbsp;&nbsp;&nbsp;}<br>
	&nbsp;&nbsp;&nbsp;<span style="color: purple">else if</span>(Potenziometro < <span style="color: green">640</span>){<br>
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	digitalWrite(<span style="color: green">13</span>, HIGH);<br>
	  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  digitalWrite(<span style="color: green">12</span>, HIGH);<br>
	  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  digitalWrite(<span style="color: green">11</span>, HIGH);<br>
	  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  digitalWrite(<span style="color: green">10</span>, LOW);<br>
	  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  digitalWrite(<span style="color: green">9</span>, LOW);<br>
  &nbsp;&nbsp;&nbsp;}<br>
	&nbsp;&nbsp;&nbsp;<span style="color: purple">else if</span>(Potenziometro < <span style="color: green">890</span>){<br>
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	digitalWrite(<span style="color: green">13</span>, HIGH);<br>
	  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  digitalWrite(<span style="color: green">12</span>, HIGH);<br>
	  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  digitalWrite(<span style="color: green">11</span>, HIGH);<br>
	  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  digitalWrite(<span style="color: green">10</span>, HIGH);<br>
	  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  digitalWrite(<span style="color: green">9</span>, LOW);<br>
  &nbsp;&nbsp;&nbsp;}<br>
	&nbsp;&nbsp;&nbsp;<span style="color: purple">else if</span>(Potenziometro <= <span style="color: green">1023</span>){<br>
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	digitalWrite(<span style="color: green">13</span>, HIGH);<br>
	  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  digitalWrite(<span style="color: green">12</span>, HIGH);<br>
	  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  digitalWrite(<span style="color: green">11</span>, HIGH);<br>
	  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  digitalWrite(<span style="color: green">10</span>, HIGH);<br>
	  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  digitalWrite(<span style="color: green">9</span>, HIGH);<br>
  &nbsp;&nbsp;&nbsp;}<br>
	&nbsp;&nbsp;&nbsp;<span style="color: purple">else</span>{<br>
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	digitalWrite(<span style="color: green">13</span>, LOW);<br>
	  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  digitalWrite(<span style="color: green">12</span>, LOW);<br>
	  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  digitalWrite(<span style="color: green">11</span>, LOW);<br>
	  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  digitalWrite(<span style="color: green">10</span>, LOW);<br>
	  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  digitalWrite(<span style="color: green">9</span>, LOW);<br>
  &nbsp;&nbsp;&nbsp;}
	&nbsp;&nbsp;&nbsp;<br>
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  Serial.println(analogRead(<span style="color: green">0</span>));<br>
  &nbsp;&nbsp;&nbsp;}</td>
</table>
	<table id="tabella3">
		<tr>
		<td id="nulla2"><span style="color: #500000" >PYTHON</span></td>
	</tr>
	<tr>
				<td id="nulla"><p id="nulla1">from serial import *<br>
from time import sleep, gmtime, strftime <br>
import requests <br>

try: <br>
    serial_port = input("Porta arduino: ") <br>
    Arduino = Serial(serial_port, 9600, timeout=.1) #Inizializzazione <br>
except: <br>
    print "Error! No device on port COM1\n" <br>
    exit(-1) #Se non viene rilevato alcun dispositivo, esce <br>
<br>
while 1: #Inizio dell'ascolto sulla porta seriale<br>
    valore_potenziometro = Arduino.readline()<br>
    print "Rilevato valore {0}\n".format(valore_potenziometro)<br>
    params = { #Creando una lista in cui sono contenuti i parametri da inviare alla pagina php<br>
        'valore' : valore_potenziometro,<br>
        'orario' : strftime("%H:%M:%S", gmtime())<br>
    }<br>
    requests.post("http://127.0.0.1/telecomunicazioni/add.php", data=params) #Eseguendo la request verso la pagina php + parametri<br>
    sleep(5) #Pausa di 3 secondi<br>
<br>
print "Bye bye!"<br></p>
</td>
	</tr>
</table>
</body>
</html>
